<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
		<script type="text/javascript" src="js/zepto.min.js">
			 
		</script>
		<style>
			*{
				margin: 0px;
				padding: 0px;
			}
			
			.content{
				
				padding: 10px;			
			}
			
			.content ul li{
				width: 100%;
				height: 40px;
				line-height: 40px;
				border-bottom: 1px solid #ccc;
			}
		</style>
		<script>
			
		$(function(){

			var windowHeight=$(window).height();  /*获取浏览器高度*/

			var flag=true;

			$(window).scroll(function(){

				//console.log('111');

				var scrollTop=$(this).scrollTop();  /*滚动条距离顶部的高度*/


				var lastChildHeight=$('.list li').last().offset().top;


				if((windowHeight+scrollTop)>lastChildHeight){

					if(flag){
						flag=false;  /*改变状态  没有请求完成的时候不在请求数据*/
							console.log('111');
					/*加载数据*/
							setTimeout(function(){
								  console.log('2222222');
									var str='';
									for (var i=0; i < 10; i++) {
										str+='<li>这是第'+i+'条数据</li>'
									}
									$('.list').append(str);

									flag=true;  /*请求完成以后  开关打开*/
							},1000)

					}

				
				}

			})

		})
		</script>
	</head>
	<body>
		
		
		<div class="content">			
			<ul class="list">
				<li>这是第一个列表1111</li>
				<li>这是第一个列表2222</li>
				<li>这是第一个列表3333</li>
				<li>这是第一个列表4444</li>
				<li>这是第一个列表1111</li>
				<li>这是第一个列表2222</li>
				<li>这是第一个列表3333</li>
				<li>这是第一个列表4444</li>
				<li>这是第一个列表1111</li>
				<li>这是第一个列表2222</li>
				<li>这是第一个列表3333</li>
				<li>这是第一个列表4444</li>
				<li>这是第一个列表1111</li>
				<li>这是第一个列表2222</li>
				<li>这是第一个列表3333</li>
				<li>这是第一个列表4444</li>
				<li>这是第一个列表1111</li>
				<li>这是第一个列表2222</li>
				<li>这是第一个列表3333</li>
				<li>这是第一个列表4444</li>
				<li>这是第一个列表1111111111111111</li>
			
				
			</ul>
		
		</div>
	</body>
</html>
